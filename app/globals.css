@import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&family=Cinzel:wght@400;500;600&family=MedievalSharp&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Unified Wood Color Palette */
  :root {
    /* Primary wood tones - warm oak */
    --wood-primary: #8b6f47;
    --wood-primary-dark: #6b5537;
    --wood-primary-light: #a5825d;
    
    /* Secondary wood tones - darker walnut */
    --wood-secondary: #654321;
    --wood-secondary-dark: #4a3420;
    --wood-secondary-light: #805634;
    
    /* Accent wood tones */
    --wood-accent: #3a2518;
    --wood-highlight: #d4af37;
    
    /* Enhanced wood texture patterns */
    --wood-grain-fine: url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='wood-fine'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.04 0.15' result='noise' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23wood-fine)' opacity='0.15'/%3E%3C/svg%3E");
    
    --wood-grain-medium: url("data:image/svg+xml,%3Csvg width='80' height='80' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='wood-med'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.02 0.1' result='noise' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23wood-med)' opacity='0.3'/%3E%3C/svg%3E");
    
    --wood-grain-coarse: url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='wood-coarse'%3E%3CfeTurbulence type='turbulence' baseFrequency='0.01 0.08' result='noise' numOctaves='2'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23wood-coarse)' opacity='0.4'/%3E%3C/svg%3E");
  }

  html {
    @apply bg-stone-900;
  }
  
  body {
    @apply font-serif text-amber-50;
    background: 
      radial-gradient(ellipse at top, rgba(139, 111, 71, 0.15) 0%, transparent 50%),
      radial-gradient(ellipse at bottom, rgba(58, 37, 24, 0.8) 0%, transparent 50%),
      var(--wood-accent);
    background-attachment: fixed;
    min-height: 100vh;
    font-size: 16px;
    line-height: 1.7;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-display;
  }
}

@layer components {
  /* Tavern Sign Text Effect - refined and professional */
  .tavern-sign-text {
    @apply text-amber-400;
    text-shadow: 
      2px 2px 4px rgba(0,0,0,0.8),
      0 0 20px rgba(212,175,55,0.4),
      0 0 40px rgba(212,175,55,0.2);
    letter-spacing: 0.03em;
    font-weight: 700;
  }
  
  /* Hanging Sign - No constant animation, only on hover */
  .hanging-sign {
    transform-origin: top center;
    transition: transform 0.3s ease;
  }
  
  /* Gentle swing animation - triggered on hover */
  @keyframes gentle-swing {
    0%, 100% { transform: rotate(-2deg); }
    50% { transform: rotate(2deg); }
  }
  
  .hanging-sign:hover {
    animation: gentle-swing 2s ease-in-out;
  }
  
  /* 3D Book Styles - refined spacing and professional look */
  .book-3d-container {
    @apply relative;
    width: 180px;
    height: 240px;
    perspective: 1000px;
    margin: 0 auto;
    /* Force GPU acceleration */
    transform: translateZ(0);
    backface-visibility: hidden;
  }
  
  .book-3d {
    @apply relative w-full h-full;
    transform-style: preserve-3d;
    transform: rotateY(25deg);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    /* Add will-change for better performance */
    will-change: transform;
    /* Force repaint on load */
    animation: book-init 0.01s;
  }
  
  @keyframes book-init {
    0% { opacity: 0.999; }
    100% { opacity: 1; }
  }
  
  .book-3d:hover {
    transform: rotateY(15deg) translateY(-2px);
  }
  
  /* Book spine (left side) - visible face */
  .book-spine {
    @apply absolute top-0 h-full;
    left: -35px;
    width: 35px;
    background: inherit;
    transform: rotateY(-90deg);
    transform-origin: right center;
    box-shadow: 
      -2px 0 8px rgba(0,0,0,0.4),
      inset 1px 0 2px rgba(0,0,0,0.3);
    border-radius: 2px 0 0 2px;
    /* Force repaint */
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  
  .spine-decoration {
    @apply h-full flex flex-col relative;
  }
  
  /* Vertical text on spine */
  .writing-mode-vertical {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    transform: rotate(180deg);
  }
  
  /* Book cover (front) - enhanced depth and professional finish */
  .book-cover {
    @apply absolute left-0 top-0 w-full h-full;
    border-radius: 0 6px 6px 0;
    box-shadow: 
      2px 2px 8px rgba(0,0,0,0.4),
      4px 4px 16px rgba(0,0,0,0.3),
      inset -2px -2px 4px rgba(0,0,0,0.2),
      inset 2px 2px 4px rgba(255,255,255,0.05);
    /* Force GPU acceleration */
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    border: 1px solid rgba(0,0,0,0.2);
  }
  
  /* Right edge shadow for depth */
  .book-3d::after {
    content: '';
    @apply absolute top-0 h-full;
    right: -30px;
    width: 30px;
    background: linear-gradient(to right, 
      rgba(0,0,0,0.3) 0%, 
      rgba(0,0,0,0.1) 50%,
      transparent 100%);
    transform: rotateY(90deg);
    transform-origin: left center;
  }
  
  /* Book Spine - Vertical */
  .hearthstone-book {
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 0.5rem;
    overflow: hidden;
  }
  
  .hearthstone-book::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 40%, rgba(0,0,0,0.2) 100%);
    pointer-events: none;
  }
  
  .hearthstone-book:hover {
    transform: translateY(-4px) scale(1.02);
    filter: brightness(1.1);
  }
  
  .hearthstone-book:hover::after {
    content: '';
    position: absolute;
    inset: -2px;
    background: radial-gradient(circle at center, transparent 30%, rgba(255, 191, 0, 0.4) 100%);
    filter: blur(10px);
    animation: magical-glow 2s ease-in-out infinite;
  }
  
  @keyframes magical-glow {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 0.8; }
  }
  
  /* Book Spine - Horizontal */
  .hearthstone-book-horizontal {
    @apply hearthstone-book;
    writing-mode: vertical-rl;
    text-orientation: mixed;
  }
  
  /* Unified Wood Surfaces */
  
  /* Primary wood surface - for main elements like the tavern sign */
  .wood-primary {
    background: 
      linear-gradient(135deg, var(--wood-primary) 0%, var(--wood-secondary) 50%, var(--wood-secondary-dark) 100%),
      var(--wood-grain-medium);
    border: 2px solid var(--wood-accent);
    box-shadow: 
      inset 0 2px 4px rgba(255,255,255,0.1),
      inset 0 -2px 4px rgba(0,0,0,0.5),
      0 8px 16px rgba(0,0,0,0.8);
  }
  
  /* Secondary wood surface - for shelves and structural elements */
  .wood-secondary {
    background: 
      linear-gradient(180deg, var(--wood-secondary) 0%, var(--wood-secondary-dark) 50%, var(--wood-accent) 100%),
      var(--wood-grain-coarse);
    box-shadow: 
      inset 0 2px 4px rgba(255,255,255,0.08),
      inset 0 -4px 8px rgba(0,0,0,0.4),
      0 4px 12px rgba(0,0,0,0.8);
  }
  
  /* Fine wood surface - for smaller decorative elements */  
  .wood-fine {
    background: 
      linear-gradient(45deg, var(--wood-primary-light) 0%, var(--wood-primary) 100%),
      var(--wood-grain-fine);
    box-shadow: 
      inset 0 1px 2px rgba(255,255,255,0.2),
      0 2px 4px rgba(0,0,0,0.6);
  }
  
  /* Legacy wooden-shelf class - now uses unified system */
  .wooden-shelf {
    @apply wood-secondary;
    position: relative;
    border-radius: 0.25rem;
  }
  
  .wooden-shelf::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: 
      repeating-linear-gradient(90deg,
        transparent 0px,
        rgba(0,0,0,0.15) 1px,
        transparent 3px,
        rgba(0,0,0,0.08) 4px,
        transparent 6px
      );
    border-radius: 0.25rem;
  }
  
  /* Parchment Panel - Enhanced for readability */
  .parchment-panel {
    background: linear-gradient(135deg, #faf8f3 0%, #f5f1e8 100%);
    border: 2px solid #d4af37;
    border-radius: 0.5rem;
    position: relative;
    box-shadow: 
      inset 0 0 10px rgba(212,175,55,0.1),
      0 4px 12px rgba(0,0,0,0.3);
    color: #2c1810;
    transition: all 0.3s ease;
  }
  
  /* Hover state for parchment panels */
  .parchment-panel:hover {
    background: linear-gradient(135deg, #fdfbf7 0%, #f8f5ed 100%);
    border-color: #e5c566;
    box-shadow: 
      inset 0 0 15px rgba(212,175,55,0.15),
      0 6px 20px rgba(0,0,0,0.35);
  }
  
  /* Search Bar Styling - Using unified wood theme */
  .search-parchment {
    background: linear-gradient(135deg, #faf8f3 0%, #f5f1e8 100%);
    border: 2px solid var(--wood-primary);
    border-radius: 0.75rem;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.1),
      0 4px 12px rgba(0,0,0,0.3);
    color: var(--wood-accent);
    position: relative;
  }
  
  .search-parchment::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--wood-grain-fine);
    opacity: 0.1;
    border-radius: 0.75rem;
    pointer-events: none;
  }
  
  .search-button {
    @apply wood-fine;
    border: 2px solid var(--wood-highlight);
    border-radius: 0.5rem;
    color: #f4e8d0;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    transition: all 0.2s;
  }
  
  .search-button:hover {
    transform: translateY(-1px);
    box-shadow: 
      inset 0 1px 2px rgba(255,255,255,0.3),
      0 4px 8px rgba(0,0,0,0.6),
      0 0 20px rgba(212,175,55,0.4);
  }
  
  /* Candle Glow Effect - with forced repaint */
  .candle-glow {
    position: relative;
    /* Force GPU acceleration */
    transform: translateZ(0);
    backface-visibility: hidden;
    /* Trigger repaint on load */
    animation: candle-init 0.01s;
  }
  
  @keyframes candle-init {
    0% { opacity: 0.999; }
    100% { opacity: 1; }
  }
  
  .candle-glow::after {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 60px;
    background: radial-gradient(ellipse at bottom, rgba(255,191,0,0.6) 0%, transparent 70%);
    animation: flicker 3s ease-in-out infinite;
  }
  
  @keyframes flicker {
    0%, 100% { opacity: 0.8; transform: translateX(-50%) scale(1); }
    50% { opacity: 1; transform: translateX(-50%) scale(1.1); }
  }
  
  /* Professional Book Colors - expanded palette with better depth */
  .book-burgundy { 
    background: linear-gradient(135deg, #8b2c34 0%, #5c1e22 50%, #3d1418 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-navy { 
    background: linear-gradient(135deg, #2c5f8d 0%, #1e3a5f 50%, #0f1e33 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-forest { 
    background: linear-gradient(135deg, #2d6a4f 0%, #1e4734 50%, #0f2818 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-purple { 
    background: linear-gradient(135deg, #6b46c1 0%, #453085 50%, #2a1f52 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-brown { 
    background: linear-gradient(135deg, #8b6914 0%, #6b4423 50%, #3d2f0a 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-charcoal { 
    background: linear-gradient(135deg, #4a4e5a 0%, #2f3237 50%, #1a1a1a 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-crimson { 
    background: linear-gradient(135deg, #b91c1c 0%, #7f1d1d 50%, #450a0a 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-teal { 
    background: linear-gradient(135deg, #0891b2 0%, #0e7490 50%, #083344 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-indigo {
    background: linear-gradient(135deg, #4f46e5 0%, #3730a3 50%, #1e1b4b 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-amber {
    background: linear-gradient(135deg, #d97706 0%, #92400e 50%, #451a03 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-emerald {
    background: linear-gradient(135deg, #10b981 0%, #047857 50%, #064e3b 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-slate {
    background: linear-gradient(135deg, #64748b 0%, #475569 50%, #1e293b 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-olive {
    background: linear-gradient(135deg, #6b7c3a 0%, #4a5428 50%, #2a3015 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-maroon {
    background: linear-gradient(135deg, #7f2d3a 0%, #5c1f28 50%, #3d1118 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
  .book-bronze {
    background: linear-gradient(135deg, #8b5a3c 0%, #6b3e2a 50%, #3d2418 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3);
  }
}

@layer utilities {
  /* Typography utilities for better readability */
  .text-readable {
    @apply text-base md:text-lg leading-relaxed;
    letter-spacing: 0.01em;
  }
  
  .text-body-primary {
    @apply text-amber-50;
  }
  
  .text-body-secondary {
    @apply text-amber-100/80;
  }
  
  .text-parchment-primary {
    @apply text-stone-800;
  }
  
  .text-parchment-secondary {
    @apply text-stone-700;
  }
  
  .heading-display {
    @apply font-display tracking-wide;
    letter-spacing: 0.05em;
  }
  
  .heading-serif {
    @apply font-serif font-semibold;
  }
  
  .text-shadow-fire {
    text-shadow: 
      0 0 10px rgba(255,140,0,0.8),
      0 0 20px rgba(255,69,0,0.6),
      0 0 30px rgba(255,0,0,0.4);
  }
  
  .text-shadow-subtle {
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  }
  
  .wooden-border {
    border-image: linear-gradient(135deg, #8b6f47 0%, #654321 50%, #4a3420 100%) 1;
    border-width: 4px;
    border-style: solid;
  }
  
  /* Force repaint utility class */
  .force-repaint {
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    will-change: transform;
  }
}
